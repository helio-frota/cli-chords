#! /usr/bin/env node

const Client = require('../lib/client.js');

if (process.argv.length === 3) {
  const client = new Client();
  client.artist(process.argv[2])
    .then(response => {
      const result = JSON.parse(response.body);
      result.forEach(r => {
        client.song(r.id)
          .then(response => {
            const songResult = JSON.parse(response.body);
            client.print(r.title, songResult);
          })
          .catch(e => {
            console.log(e);
          });
      });
    })
    .catch(e => {
      console.log(e);
    });
} else {
  console.log('Usage: \x1b[35mchords Metallica\x1b[39m or \x1b[35mchords \'Iron Maiden\'\x1b[39m');
}
